export const translations = {
  en: {
    'header.title': 'Coffee Psychologist',
    'header.subtitle': 'Your personal guide to self-discovery through coffee grounds patterns',
    'uploader.title': 'Upload a photo of your coffee cup',
    'uploader.subtitle': 'Drag and drop the file here or click to select',
    'uploader.drop.validTitle': 'Drop the image to analyze',
    'uploader.drop.validSubtitle': 'Release the file to upload',
    'uploader.drop.invalidTitle': 'Only images are accepted',
    'uploader.drop.invalidSubtitle': 'Please select a valid file type (.jpg, .png, etc.)',
    'uploader.tip.title': 'Tips for the best results:',
    'uploader.tip.1': 'Take the photo in good, even lighting.',
    'uploader.tip.2': 'Focus on the inside of the cup with the grounds.',
    'uploader.tip.3': 'Try to ensure there is no glare on the image.',
    'imageReady.title': 'Your cup is ready for analysis',
    'imageReady.focus.title': 'What to focus on?',
    'imageReady.focus.wellbeing': 'General Well-being',
    'imageReady.focus.career': 'Career',
    'imageReady.focus.relationships': 'Relationships',
    'button.analyze': 'Analyze',
    'button.reset': 'Reset',
    'loader.message': 'Studying the patterns in the coffee grounds...',
    'error.analyzeFailed': 'Failed to analyze the image. Please try again.',
    'error.tryAgain': 'Try Again',
    'error.selectImage': 'Please select an image first.',
    'result.title': 'Your Psychological Profile',
    'result.button.share': 'Share',
    'result.button.analyzeAnother': 'Analyze another cup',
    'share.title': 'My Coffee Analysis',
    'share.text': 'Here\'s what my coffee cup revealed:',
    'share.error': 'Failed to share image. Please try again.',
    'share.image.footer': 'Analysis created with Coffee Psychologist',
    'footer.copyright': '© {year} Coffee Psychologist. All rights reserved.',
    'footer.disclaimer': 'Remember, this is just a tool for self-discovery.',
    'menu.language': 'Language',
    'menu.theme': 'Theme',
    'menu.light': 'Light',
    'menu.dark': 'Dark',
    'menu.signIn': 'Sign In',
    'menu.myHistory': 'My History',
    'auth.login': 'Sign In',
    'auth.logout': 'Sign Out',
    'auth.modalTitle': 'Sign in to your account',
    'auth.signInWithGoogle': 'Continue with Google',
    'auth.signInWithApple': 'Continue with Apple',
    'auth.signInWithFacebook': 'Continue with Facebook',
    'auth.signInWithTelegram': 'Continue with Telegram',
    'auth.showMore': 'Show other ways to sign in',
    'auth.emailPlaceholder': 'your@email.com',
    'auth.magicLink.send': 'Send Magic Link',
    'auth.magicLink.sent': 'Link sent! Check your email.',
    'auth.divider': 'or',
    'history.title': 'Analysis History',
    'history.empty.title': 'No History Yet',
    'history.empty.subtitle': 'Your past analyses will appear here once you complete one.',
    'history.error': 'Could not load history. Please try again later.',
    'history.back': 'Back to Uploader',
    'history.viewAnalysis': 'View Analysis',
    'history.focusAreaLabel': 'Focus',
    'pricing.title': 'Symancy Tariffs',
    'pricing.subtitle': 'Choose the right plan for AI coffee ground analysis',
    'pricing.tariff.basic.name': 'Novice',
    'pricing.tariff.basic.description': '1 basic reading (3-4 analysis blocks)',
    'pricing.tariff.basic.feature.1': '1 analysis',
    'pricing.tariff.basic.feature.2': 'Basic blocks',
    'pricing.tariff.basic.feature.3': 'History saved',
    'pricing.tariff.pack5.name': 'Amateur',
    'pricing.tariff.pack5.description': '5 basic readings (40% discount)',
    'pricing.tariff.pack5.feature.1': '5 analyses',
    'pricing.tariff.pack5.feature.2': 'Save 40%',
    'pricing.tariff.pack5.feature.3': 'Basic blocks',
    'pricing.tariff.pack5.feature.4': 'History saved',
    'pricing.tariff.pro.name': 'Inner Sage',
    'pricing.tariff.pro.description': '1 PRO reading (6+ blocks, deep analysis)',
    'pricing.tariff.pro.feature.1': '1 PRO analysis',
    'pricing.tariff.pro.feature.2': '6+ blocks',
    'pricing.tariff.pro.feature.3': 'Deep analysis',
    'pricing.tariff.pro.feature.4': 'History saved',
    'pricing.tariff.cassandra.name': 'Cassandra',
    'pricing.tariff.cassandra.description': '1 esoteric prediction (unique format)',
    'pricing.tariff.cassandra.feature.1': 'Esoteric',
    'pricing.tariff.cassandra.feature.2': 'Unique format',
    'pricing.tariff.cassandra.feature.3': 'Prediction',
    'pricing.tariff.cassandra.feature.4': 'History saved',
    'pricing.howItWorks.title': 'How It Works',
    'pricing.howItWorks.step1.text': 'Choose a tariff and pay',
    'pricing.howItWorks.step2.text': 'Credits are credited to your account',
    'pricing.howItWorks.step3.text': 'Upload a photo of coffee grounds',
    'pricing.howItWorks.step4.text': 'Get a personal AI interpretation',
    'pricing.delivery.title': 'Service Delivery',
    'pricing.delivery.instant': 'Service is provided instantly after payment:',
    'pricing.delivery.point1': 'Credits are credited automatically',
    'pricing.delivery.point2': 'Analysis result is available immediately (1-2 mins)',
    'pricing.delivery.point3': 'All history is saved in your account',
    'pricing.button.return': 'Return to Home',
    'payment.selector.title': 'Select Tariff',
    'payment.selector.subtitle': 'Choose the right plan for coffee analysis',
    'payment.selector.close': 'Close',
    'payment.loading.creating': 'Creating payment...',
    'payment.loading.widget': 'Loading payment form...',
    'payment.error.widget': 'Error loading payment form',
    'payment.error.retry': 'Try Again',
    'chat.placeholder': 'Type your answer...',
    'chat.arina.greeting': 'Hello! I am Arina. I will help you look deep into yourself through coffee patterns. How may I address you?',
    'chat.arina.askIntent': 'Nice to meet you, {name}. What worries or interests you today? What shall we ask the cup?',
    'chat.arina.askUpload': 'I hear you. Let\'s see what the symbols say. Please upload a photo of your cup.',
    'chat.typing': 'Arina is typing...',
  },
  ru: {
    'header.title': 'Кофейный Психолог',
    'header.subtitle': 'Ваш личный гид по самопознанию через узоры на кофейной гуще',
    'uploader.title': 'Загрузите фото вашей кофейной чашки',
    'uploader.subtitle': 'Перетащите файл сюда или нажмите для выбора',
    'uploader.drop.validTitle': 'Отпустите изображение для анализа',
    'uploader.drop.validSubtitle': 'Отпустите файл для загрузки',
    'uploader.drop.invalidTitle': 'Принимаются только изображения',
    'uploader.drop.invalidSubtitle': 'Пожалуйста, выберите файл правильного типа (.jpg, .png и т.д.)',
    'uploader.tip.title': 'Советы для лучшего результата:',
    'uploader.tip.1': 'Сделайте фото при хорошем, ровном освещении.',
    'uploader.tip.2': 'Сфокусируйтесь на внутренней части чашки с гущей.',
    'uploader.tip.3': 'Постарайтесь, чтобы на изображении не было бликов.',
    'imageReady.title': 'Ваша чашка готова к анализу',
    'imageReady.focus.title': 'На чем сфокусироваться?',
    'imageReady.focus.wellbeing': 'Общее самочувствие',
    'imageReady.focus.career': 'Карьера',
    'imageReady.focus.relationships': 'Отношения',
    'button.analyze': 'Анализировать',
    'button.reset': 'Сбросить',
    'loader.message': 'Изучаю узоры на кофейной гуще...',
    'error.analyzeFailed': 'Не удалось проанализировать изображение. Пожалуйста, попробуйте еще раз.',
    'error.tryAgain': 'Попробовать снова',
    'error.selectImage': 'Пожалуйста, сначала выберите изображение.',
    'result.title': 'Ваш Психологический Портрет',
    'result.button.share': 'Поделиться',
    'result.button.analyzeAnother': 'Проанализировать еще одну чашку',
    'share.title': 'Мой кофейный анализ',
    'share.text': 'Вот что рассказала моя кофейная чашка:',
    'share.error': 'Не удалось поделиться изображением. Пожалуйста, попробуйте еще раз.',
    'share.image.footer': 'Анализ создан с помощью Coffee Psychologist',
    'footer.copyright': '© {year} Кофейный Психолог. Все права защищены.',
    'footer.disclaimer': 'Помните, это лишь инструмент для самопознания.',
    'menu.language': 'Язык',
    'menu.theme': 'Тема',
    'menu.light': 'Светлая',
    'menu.dark': 'Тёмная',
    'menu.signIn': 'Войти',
    'menu.myHistory': 'Моя история',
    'auth.login': 'Войти',
    'auth.logout': 'Выйти',
    'auth.modalTitle': 'Вход в аккаунт',
    'auth.signInWithGoogle': 'Войти через Google',
    'auth.signInWithApple': 'Войти через Apple',
    'auth.signInWithFacebook': 'Войти через Facebook',
    'auth.signInWithTelegram': 'Войти через Telegram',
    'auth.showMore': 'Другие способы входа',
    'auth.emailPlaceholder': 'vash@email.com',
    'auth.magicLink.send': 'Отправить ссылку',
    'auth.magicLink.sent': 'Ссылка отправлена! Проверьте почту.',
    'auth.divider': 'или',
    'history.title': 'История анализов',
    'history.empty.title': 'История пока пуста',
    'history.empty.subtitle': 'Ваши прошлые анализы появятся здесь после завершения первого.',
    'history.error': 'Не удалось загрузить историю. Пожалуйста, попробуйте позже.',
    'history.back': 'Вернуться к загрузке',
    'history.viewAnalysis': 'Смотреть анализ',
    'history.focusAreaLabel': 'Фокус',
    'pricing.title': 'Тарифы Symancy',
    'pricing.subtitle': 'Выберите подходящий тариф для анализа кофейной гущи с помощью AI',
    'pricing.tariff.basic.name': 'Новичок',
    'pricing.tariff.basic.description': '1 базовая расшифровка (3-4 блока анализа)',
    'pricing.tariff.basic.feature.1': '1 анализ',
    'pricing.tariff.basic.feature.2': 'Базовые блоки',
    'pricing.tariff.basic.feature.3': 'История анализов',
    'pricing.tariff.pack5.name': 'Любитель',
    'pricing.tariff.pack5.description': '5 базовых расшифровок (скидка 40%)',
    'pricing.tariff.pack5.feature.1': '5 анализов',
    'pricing.tariff.pack5.feature.2': 'Экономия 40%',
    'pricing.tariff.pack5.feature.3': 'Базовые блоки',
    'pricing.tariff.pack5.feature.4': 'История анализов',
    'pricing.tariff.pro.name': 'Внутренний мудрец',
    'pricing.tariff.pro.description': '1 PRO расшифровка (6+ блоков, глубокий анализ)',
    'pricing.tariff.pro.feature.1': '1 PRO анализ',
    'pricing.tariff.pro.feature.2': '6+ блоков',
    'pricing.tariff.pro.feature.3': 'Глубокий анализ',
    'pricing.tariff.pro.feature.4': 'История анализов',
    'pricing.tariff.cassandra.name': 'Кассандра',
    'pricing.tariff.cassandra.description': '1 эзотерическое предсказание (уникальный формат)',
    'pricing.tariff.cassandra.feature.1': 'Эзотерика',
    'pricing.tariff.cassandra.feature.2': 'Уникальный формат',
    'pricing.tariff.cassandra.feature.3': 'Предсказание',
    'pricing.tariff.cassandra.feature.4': 'История анализов',
    'pricing.howItWorks.title': 'Как это работает',
    'pricing.howItWorks.step1.text': 'Выберите тариф и оплатите',
    'pricing.howItWorks.step2.text': 'На ваш аккаунт начисляются кредиты',
    'pricing.howItWorks.step3.text': 'Загрузите фото кофейной гущи',
    'pricing.howItWorks.step4.text': 'Получите персональную расшифровку от AI',
    'pricing.delivery.title': 'Способ получения услуги',
    'pricing.delivery.instant': 'Услуга предоставляется мгновенно после оплаты:',
    'pricing.delivery.point1': 'Кредиты зачисляются автоматически',
    'pricing.delivery.point2': 'Результат анализа доступен сразу (1-2 минуты)',
    'pricing.delivery.point3': 'История всех расшифровок сохраняется',
    'pricing.button.return': 'Вернуться на главную',
    'payment.selector.title': 'Выберите тариф',
    'payment.selector.subtitle': 'Выберите подходящий пакет для анализа кофейной гущи',
    'payment.selector.close': 'Закрыть',
    'payment.loading.creating': 'Создание платежа...',
    'payment.loading.widget': 'Загрузка платёжной формы...',
    'payment.error.widget': 'Ошибка при загрузке платёжной формы',
    'payment.error.retry': 'Попробовать снова',
    'chat.placeholder': 'Напишите ответ...',
    'chat.arina.greeting': 'Привет! Я Арина. Я помогу тебе заглянуть вглубь себя через кофейные узоры. Как я могу к тебе обращаться?',
    'chat.arina.askIntent': 'Очень приятно, {name}. Что тебя тревожит или интересует сегодня? О чем будем спрашивать чашку?',
    'chat.arina.askUpload': 'Я тебя услышала. Давай посмотрим, что скажут символы. Загрузи фото своей чашки.',
    'chat.typing': 'Арина печатает...',
  },
  zh: {
    'header.title': '咖啡心理学家',
    'header.subtitle': '通过咖啡渣图案进行自我发现的个人向导',
    'uploader.title': '上传您的咖啡杯照片',
    'uploader.subtitle': '将文件拖放到此处或点击选择',
    'uploader.drop.validTitle': '放下图片进行分析',
    'uploader.drop.validSubtitle': '释放文件以上传',
    'uploader.drop.invalidTitle': '只接受图片文件',
    'uploader.drop.invalidSubtitle': '请选择有效的文件类型（.jpg, .png等）',
    'uploader.tip.title': '为获得最佳结果的提示:',
    'uploader.tip.1': '在良好、均匀的光线下拍照。',
    'uploader.tip.2': '聚焦于杯子内部的咖啡渣。',
    'uploader.tip.3': '尽量确保图像中没有眩光。',
    'imageReady.title': '您的杯子已准备好进行分析',
    'imageReady.focus.title': '关注什么？',
    'imageReady.focus.wellbeing': '总体健康',
    'imageReady.focus.career': '职业',
    'imageReady.focus.relationships': '人际关系',
    'button.analyze': '分析',
    'button.reset': '重置',
    'loader.message': '正在研究咖啡渣中的图案...',
    'error.analyzeFailed': '分析图像失败。请重试。',
    'error.tryAgain': '再试一次',
    'error.selectImage': '请先选择一张图片。',
    'result.title': '您的心理画像',
    'result.button.share': '分享',
    'result.button.analyzeAnother': '分析另一个杯子',
    'share.title': '我的咖啡分析',
    'share.text': '这是我的咖啡杯揭示的内容：',
    'share.error': '分享图片失败。请再试一次。',
    'share.image.footer': '由咖啡心理学家创建的分析',
    'footer.copyright': '© {year} 咖啡心理学家. 版权所有.',
    'footer.disclaimer': '请记住，这只是一个自我探索的工具。',
    'menu.language': '语言',
    'menu.theme': '主题',
    'menu.light': '浅色',
    'menu.dark': '深色',
    'menu.signIn': '登录',
    'menu.myHistory': '我的历史',
    'auth.login': '登录',
    'auth.logout': '登出',
    'auth.modalTitle': '登录您的帐户',
    'auth.signInWithGoogle': '使用谷歌继续',
    'auth.signInWithApple': '使用蘋果繼續',
    'auth.signInWithFacebook': '使用臉書繼續',
    'auth.signInWithTelegram': '使用電報繼續',
    'auth.showMore': '显示其他登录方式',
    'auth.emailPlaceholder': 'your@email.com',
    'auth.magicLink.send': '发送登录链接',
    'auth.magicLink.sent': '链接已发送！请检查您的电子邮件。',
    'auth.divider': '或者',
    'history.title': '分析历史',
    'history.empty.title': '暂无历史记录',
    'history.empty.subtitle': '您完成分析后，过去的分析将显示在此处。',
    'history.error': '无法加载历史记录。请稍后再试。',
    'history.back': '返回上传',
    'history.viewAnalysis': '查看分析',
    'history.focusAreaLabel': '重点',
    'pricing.title': 'Symancy 价格表',
    'pricing.subtitle': '选择合适的 AI 咖啡渣分析计划',
    'pricing.tariff.basic.name': '新手',
    'pricing.tariff.basic.description': '1 次基本解读（3-4 个分析模块）',
    'pricing.tariff.basic.feature.1': '1 次分析',
    'pricing.tariff.basic.feature.2': '基本模块',
    'pricing.tariff.basic.feature.3': '保存历史',
    'pricing.tariff.pack5.name': '爱好者',
    'pricing.tariff.pack5.description': '5 次基本解读（优惠 40%）',
    'pricing.tariff.pack5.feature.1': '5 次分析',
    'pricing.tariff.pack5.feature.2': '节省 40%',
    'pricing.tariff.pack5.feature.3': '基本模块',
    'pricing.tariff.pack5.feature.4': '保存历史',
    'pricing.tariff.pro.name': '内在智者',
    'pricing.tariff.pro.description': '1 次 PRO 解读（6+ 模块，深度分析）',
    'pricing.tariff.pro.feature.1': '1 次 PRO 分析',
    'pricing.tariff.pro.feature.2': '6+ 模块',
    'pricing.tariff.pro.feature.3': '深度分析',
    'pricing.tariff.pro.feature.4': '保存历史',
    'pricing.tariff.cassandra.name': '卡桑德拉',
    'pricing.tariff.cassandra.description': '1 次神秘预测（独特格式）',
    'pricing.tariff.cassandra.feature.1': '神秘学',
    'pricing.tariff.cassandra.feature.2': '独特格式',
    'pricing.tariff.cassandra.feature.3': '预测',
    'pricing.tariff.cassandra.feature.4': '保存历史',
    'pricing.howItWorks.title': '如何运作',
    'pricing.howItWorks.step1.text': '选择价格计划并付款',
    'pricing.howItWorks.step2.text': '积分记入您的帐户',
    'pricing.howItWorks.step3.text': '上传咖啡渣照片',
    'pricing.howItWorks.step4.text': '获取 AI 个人解读',
    'pricing.delivery.title': '服务交付',
    'pricing.delivery.instant': '付款后立即提供服务：',
    'pricing.delivery.point1': '积分自动入账',
    'pricing.delivery.point2': '分析结果立即可用（1-2 分钟）',
    'pricing.delivery.point3': '所有历史记录保存在您的帐户中',
    'pricing.button.return': '返回首页',
    'payment.selector.title': '选择价格计划',
    'payment.selector.subtitle': '选择合适的咖啡分析计划',
    'payment.selector.close': '关闭',
    'payment.loading.creating': '正在创建付款...',
    'payment.loading.widget': '正在加载付款表格...',
    'payment.error.widget': '加载付款表格时出错',
    'payment.error.retry': '再试一次',
    'chat.placeholder': '输入你的答案...',
    'chat.arina.greeting': '你好！我是 Arina。我将通过咖啡图案帮助你深入了解自己。我该如何称呼你？',
    'chat.arina.askIntent': '很高兴见到你，{name}。今天有什么让你担心或感兴趣的事吗？我们要问杯子什么？',
    'chat.arina.askUpload': '我明白了。让我们看看符号怎么说。请上传你的杯子照片。',
    'chat.typing': 'Arina 正在输入...',
  },
};

export type Lang = keyof typeof translations;

export const t = (key: keyof typeof translations.en, lang: Lang): string => {
  return translations[lang][key] || translations.en[key] || key;
};

export const detectInitialLanguage = (): Lang => {
  if (typeof window === 'undefined') return 'en';
  
  const savedLang = localStorage.getItem('language');
  if (savedLang && translations.hasOwnProperty(savedLang)) {
    return savedLang as Lang;
  }

  const browserLang = navigator.language.split('-')[0];
  if (translations.hasOwnProperty(browserLang)) {
    return browserLang as Lang;
  }
  
  return 'en';
};