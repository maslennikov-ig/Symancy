# –ì–∞–π–¥ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø–ª–∞—Ç–µ–∂–µ–π Symancy

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

```
https://symancy.ru/test-payment
```

### 2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å

1. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à email
2. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—á—Ç—É ‚Äî –ø—Ä–∏–¥—ë—Ç —Å—Å—ã–ª–∫–∞ –¥–ª—è –≤—Ö–æ–¥–∞
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ

### 3. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ 4 —Ç–∞—Ä–∏—Ñ–∞:

| –¢–∞—Ä–∏—Ñ | –¶–µ–Ω–∞ | –ö—Ä–µ–¥–∏—Ç—ã |
|-------|------|---------|
| –ù–æ–≤–∏—á–æ–∫ | 100 ‚ÇΩ | 1 |
| –õ—é–±–∏—Ç–µ–ª—å | 300 ‚ÇΩ | 5 |
| –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º—É–¥—Ä–µ—Ü | 500 ‚ÇΩ | 1 |
| –ö–∞—Å—Å–∞–Ω–¥—Ä–∞ | 1000 ‚ÇΩ | 1 |

–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π —Ç–∞—Ä–∏—Ñ.

### 4. –û–ø–ª–∞—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∫–∞—Ä—Ç–æ–π

| –ü–æ–ª–µ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|------|----------|
| **–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã** | `4111 1111 1111 1111` |
| **–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è** | –õ—é–±–∞—è –¥–∞—Ç–∞ –≤ –±—É–¥—É—â–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `12/25`) |
| **CVV** | –õ—é–±—ã–µ 3 —Ü–∏—Ñ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `123`) |

> ‚ö†Ô∏è –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∞ YooKassa. –†–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏ –ù–ï —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è.

### 5. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–ª–∞—Ç—ë–∂

–ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç—ã –Ω–∞–∂–º–∏—Ç–µ "–û–ø–ª–∞—Ç–∏—Ç—å".

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã –≤—ã —É–≤–∏–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
‚úÖ –ü–ª–∞—Ç—ë–∂ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.
```

### –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö Supabase

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Supabase Dashboard](https://supabase.com/dashboard/project/johspxgvkbrysxhilmbg)

2. **–¢–∞–±–ª–∏—Ü–∞ `purchases`**:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Table Editor ‚Üí purchases
   - –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø–∏—Å—å —Å –≤–∞—à–∏–º `user_id`
   - –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `succeeded`
   - –ü–æ–ª–µ `yukassa_payment_id` –∑–∞–ø–æ–ª–Ω–µ–Ω–æ
   - –ü–æ–ª–µ `paid_at` —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞—Ç—É –æ–ø–ª–∞—Ç—ã

3. **–¢–∞–±–ª–∏—Ü–∞ `user_credits`**:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Table Editor ‚Üí user_credits
   - –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø–∏—Å—å —Å –≤–∞—à–∏–º `user_id`
   - –ö—Ä–µ–¥–∏—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `basic_credits: 1`)

4. **–¢–∞–±–ª–∏—Ü–∞ `payment_analytics`**:
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Table Editor ‚Üí payment_analytics
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏:
     - `payment_started` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
     - `payment_succeeded` ‚Äî —É—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞

---

## –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞ ‚úÖ

1. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ "–ù–æ–≤–∏—á–æ–∫" (100 ‚ÇΩ)
2. –í–≤–µ–¥–∏—Ç–µ –∫–∞—Ä—Ç—É `4111 1111 1111 1111`
3. –û–ø–ª–∞—Ç–∏—Ç–µ
4. **–û–∂–∏–¥–∞–Ω–∏–µ**:
   - –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
   - –í `purchases` —Å—Ç–∞—Ç—É—Å `succeeded`
   - –í `user_credits` +1 basic_credits

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –û—Ç–∫–ª–æ–Ω—ë–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞ ‚ùå

1. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π —Ç–∞—Ä–∏—Ñ
2. –í–≤–µ–¥–∏—Ç–µ –∫–∞—Ä—Ç—É `4000 0000 0000 0002`
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–ø–ª–∞—Ç–∏—Ç—å
4. **–û–∂–∏–¥–∞–Ω–∏–µ**:
   - –û—à–∏–±–∫–∞ –æ–ø–ª–∞—Ç—ã
   - –í `purchases` —Å—Ç–∞—Ç—É—Å `canceled` –∏–ª–∏ –æ—Å—Ç–∞—ë—Ç—Å—è `pending`

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: 3D Secure üîê

1. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π —Ç–∞—Ä–∏—Ñ
2. –í–≤–µ–¥–∏—Ç–µ –∫–∞—Ä—Ç—É `4000 0000 0000 3063`
3. –û–ø–ª–∞—Ç–∏—Ç–µ
4. **–û–∂–∏–¥–∞–Ω–∏–µ**:
   - –ü–æ—è–≤–∏—Ç—Å—è –æ–∫–Ω–æ 3D Secure
   - –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è ‚Äî —É—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç—ã

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|-------------|-----------|
| –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞ | `4111 1111 1111 1111` | –ü–ª–∞—Ç—ë–∂ –ø—Ä–æ—Ö–æ–¥–∏—Ç |
| –û—Ç–∫–ª–æ–Ω–µ–Ω–æ | `4000 0000 0000 0002` | –ü–ª–∞—Ç—ë–∂ –æ—Ç–∫–ª–æ–Ω—ë–Ω |
| 3D Secure | `4000 0000 0000 3063` | –¢—Ä–µ–±—É–µ—Ç—Å—è 3DS |
| –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ | `4000 0000 0000 9995` | –û—à–∏–±–∫–∞ –±–∞–ª–∞–Ω—Å–∞ |

---

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞ "Not authenticated"

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –∏–ª–∏ –∏—Å—Ç—ë–∫ —Ç–æ–∫–µ–Ω

**–†–µ—à–µ–Ω–∏–µ**:
1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –∑–∞–Ω–æ–≤–æ

### –û—à–∏–±–∫–∞ "Payment creation failed"

**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–æ–±–ª–µ–º–∞ —Å API YooKassa –∏–ª–∏ —Å–µ–∫—Ä–µ—Ç–∞–º–∏

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ Supabase —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–µ–∫—Ä–µ—Ç—ã:
   - `YUKASSA_SHOP_ID`
   - `YUKASSA_SECRET_KEY`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Edge Function –≤ Supabase Dashboard

### –ü–ª–∞—Ç—ë–∂ –ø—Ä–æ—à—ë–ª, –Ω–æ –∫—Ä–µ–¥–∏—Ç—ã –Ω–µ –Ω–∞—á–∏—Å–ª–µ–Ω—ã

**–ü—Ä–∏—á–∏–Ω–∞**: Webhook –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º –º–∞–≥–∞–∑–∏–Ω–µ YooKassa –Ω–∞—Å—Ç—Ä–æ–µ–Ω webhook URL:
   ```
   https://johspxgvkbrysxhilmbg.supabase.co/functions/v1/payment-webhook
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ `payment-webhook` –≤ Supabase Dashboard

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
- Email: support@symancy.ru
- Telegram: @symancy_support
