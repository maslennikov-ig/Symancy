# Настройка Провайдеров Аутентификации (OAuth)

Этот документ поможет вам шаг за шагом настроить сторонние способы входа (через Google, Apple и др.) в вашем проекте Supabase. Для каждого провайдера вам потребуется создать приложение в его консоли разработчика, получить `Client ID` и `Client Secret`, а затем ввести их в панель управления Supabase.

Приложение уже написано так, чтобы поддерживать эти способы входа. Как только вы включите их в Supabase, они автоматически заработают в интерфейсе.

---

### Шаг 0: Поиск URL-адреса для перенаправления (Callback URL) в Supabase

Этот URL-адрес понадобится вам для настройки каждого из провайдеров.

1.  Зайдите в панель управления вашего проекта на [supabase.com](https://supabase.com).
2.  В меню слева выберите `Authentication` (Аутентификация).
3.  Перейдите на вкладку `Providers` (Провайдеры).
4.  Найдите в списке любого провайдера, например, Google, и разверните его.
5.  Вы увидите поле **Redirect URL (Callback URL)**. Оно будет выглядеть примерно так: `https://<ID-ВАШЕГО-ПРОЕКТА>.supabase.co/auth/v1/callback`.
6.  **Скопируйте этот URL.** Вы будете использовать его во всех последующих шагах.

---

### 1. Настройка Google

1.  **Google Cloud Console**: Перейдите в [Google Cloud Console](https://console.cloud.google.com/).
2.  **Проект**: Создайте новый проект или выберите существующий.
3.  **Учетные данные**: В меню навигации перейдите в `APIs & Services` -> `Credentials` (API и сервисы -> Учетные данные).
4.  **Создать OAuth ID**: Нажмите `+ CREATE CREDENTIALS` (+ Создать учетные данные) и выберите `OAuth client ID` (OAuth-клиент).
5.  **Тип приложения**: Выберите `Web application` (Веб-приложение).
6.  **URL перенаправления**: В разделе `Authorized redirect URIs` (Разрешенные URI перенаправления) нажмите `+ ADD URI` и вставьте скопированный ранее Callback URL из Supabase.
7.  **Создание**: Нажмите `Create` (Создать). Вы увидите `Client ID` и `Client Secret`.
8.  **Supabase**: Вернитесь в панель Supabase (`Authentication` -> `Providers` -> `Google`). Вставьте полученные `Client ID` и `Client Secret` в соответствующие поля, включите провайдер и сохраните изменения.

---

### 2. Настройка Apple

Настройка Apple сложнее и требует платной подписки Apple Developer Program.

1.  **Apple Developer Portal**: Войдите в свой аккаунт на [Apple Developer Portal](https://developer.apple.com/).
2.  **Identifiers**: Перейдите в раздел `Certificates, Identifiers & Profiles` -> `Identifiers` и создайте новый `Services ID`. В качестве `Identifier` используйте что-то уникальное, например, `com.yourdomain.app`.
3.  **Sign in with Apple**: Включите `Sign in with Apple` для этого Services ID и нажмите `Configure`.
4.  **Домены и URL**: В поле `Domains and Subdomains` укажите домен API вашего проекта Supabase (`<ID-ВАШЕГО-ПРОЕКТА>.supabase.co`). В `Return URLs` вставьте Callback URL из Supabase.
5.  **Создание ключа**: Перейдите в раздел `Keys` и создайте новый ключ. Включите для него `Sign in with Apple`. Скачайте файл ключа (`.p8`) — **он скачивается только один раз**. Скопируйте `Key ID` и `Team ID` (находится в правом верхнем углу).
6.  **Supabase**: Вернитесь в Supabase (`Authentication` -> `Providers` -> `Apple`).
    *   `Client ID`: это ваш `Services ID` (например, `com.yourdomain.app`).
    *   `Client Secret`: откройте скачанный `.p8` файл в текстовом редакторе и скопируйте всё его содержимое (включая `-----BEGIN PRIVATE KEY-----` и `-----END PRIVATE KEY-----`).
    *   Включите провайдер и сохраните.

---

### 3. Настройка Facebook

1.  **Meta for Developers**: Перейдите на [портал для разработчиков Meta](https://developers.facebook.com/) и создайте новое приложение.
2.  **Facebook Login**: На панели управления приложения добавьте продукт `Facebook Login` (Вход через Facebook).
3.  **Настройки**: В настройках продукта (`Facebook Login` -> `Settings`) найдите поле `Valid OAuth Redirect URIs` (Действительные URI перенаправления для OAuth).
4.  **URL**: Вставьте в это поле Callback URL из Supabase и сохраните изменения.
5.  **ID и Секрет**: Перейдите в `App Settings` -> `Basic` (Настройки приложения -> Основные). Здесь вы найдете `App ID` (это Client ID) и `App Secret` (это Client Secret).
6.  **Supabase**: Скопируйте эти данные в настройки провайдера Facebook в вашей панели Supabase и включите его.

---

### 4. Настройка Telegram

1.  **BotFather**: В Telegram найдите бота `@BotFather` и начните с ним диалог.
2.  **Создание бота**: Отправьте команду `/newbot`, чтобы создать нового бота. Придумайте ему имя и юзернейм (должен заканчиваться на `bot`).
3.  **Токен**: После создания BotFather пришлет вам токен. **Сохраните его**.
4.  **Домен**: Отправьте BotFather команду `/setdomain`. Выберите созданного бота и отправьте ему домен вашего API Supabase: `<ID-ВАШЕГО-ПРОЕКТА>.supabase.co`.
5.  **Supabase**: Перейдите в настройки провайдера Telegram в Supabase.
    *   В поле `Client Secret` вставьте **токен вашего бота**.
    *   Поле `Client ID` оставьте пустым.
    *   Включите провайдер и сохраните.

---

### 5. Настройка Yandex

1.  **Yandex OAuth**: Перейдите в [консоль разработчика Yandex OAuth](https://oauth.yandex.ru/).
2.  **Создание клиента**: Нажмите `Создать клиент`.
3.  **Название**: Придумайте название для вашего сервиса.
4.  **Платформа**: В разделе "Платформы" выберите `Веб-сервисы`.
5.  **URL**: Нажмите `Подставить URL для разработки` и в поле `Redirect URI` вставьте Callback URL из Supabase.
6.  **Доступы**: В разделе "Доступы" выберите `Яндекс ID API` и отметьте галочками:
    *   `Доступ к адресу электронной почты`
    *   `Доступ к логину, имени и фамилии, полу`
7.  **Создание**: Нажмите `Создать приложение`. Вы получите `ID` (это Client ID) и `Пароль` (это Client Secret).
8.  **Supabase**: Скопируйте эти данные в настройки провайдера Yandex в вашей панели Supabase и включите его.

---

После выполнения этих шагов для каждого желаемого провайдера, соответствующие кнопки входа в вашем приложении станут полностью функциональными.