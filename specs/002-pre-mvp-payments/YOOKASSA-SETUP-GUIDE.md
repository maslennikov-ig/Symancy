# Инструкция по настройке YooKassa для сайта

**Цель**: Получить credentials для приёма платежей на symancy.ru

---

## Шаг 1: Вход в личный кабинет YooKassa

1. Перейдите на https://yookassa.ru/
2. Нажмите "Личный кабинет" → Войдите или зарегистрируйтесь

---

## Шаг 2: Подключение магазина

### Если магазин ещё не создан:

1. **Тип подключения**: выберите "Для сайта"
2. **Сайт**: укажите `https://symancy.ru`
3. **Вид деятельности**: "IT-услуги" или "Развлекательные сервисы"
4. **Форма собственности**: ИП
5. Заполните реквизиты:
   - ИП Вознесенская Анна Юрьевна
   - ИНН: 771976259033
   - ОГРНИП: 316774600413540

### Требования YooKassa к сайту (уже готово ✅):

| Требование | Страница | Статус |
|------------|----------|--------|
| Товары/услуги с ценами | /pricing | ✅ |
| Способ получения услуги | /pricing | ✅ |
| Оферта/Соглашение | /terms | ✅ |
| Контакты и реквизиты | /contacts | ✅ |

---

## Шаг 3: Получение API-ключей

После одобрения магазина:

1. Перейдите в **Интеграция** → **Ключи API**
2. Скопируйте и пришлите мне:

```
shopId: _______________  (идентификатор магазина, например: 123456)

secretKey: _______________ (секретный ключ, начинается с live_ или test_)
```

**Важно**:
- Для тестирования используйте **тестовый магазин** (test_xxx ключи)
- Для продакшена — **боевой магазин** (live_xxx ключи)

---

## Шаг 4: Настройка Webhook

1. Перейдите в **Интеграция** → **HTTP-уведомления**
2. Нажмите "Добавить"
3. Заполните:

| Поле | Значение |
|------|----------|
| URL | `https://johspxgvkbrysxhilmbg.supabase.co/functions/v1/payment-webhook` |
| События | ✅ payment.succeeded, ✅ payment.canceled |

4. После сохранения скопируйте **Секретный ключ для подписи** и пришлите:

```
webhookSecret: _______________
```

---

## Шаг 5: Что мне нужно от вас

После выполнения шагов выше пришлите мне три значения:

```
YUKASSA_SHOP_ID=<ваш shopId>
YUKASSA_SECRET_KEY=<ваш secretKey>
YUKASSA_WEBHOOK_SECRET=<секрет для подписи webhook>
```

Я установлю их в Supabase, и платежи заработают!

---

## Дополнительно: Resend для email-уведомлений

Для отправки email-подтверждений после оплаты нужен Resend API key:

1. Зарегистрируйтесь на https://resend.com/
2. Создайте API Key
3. Пришлите:

```
RESEND_API_KEY=re_xxxxx
```

**Или**: можем пока пропустить email-уведомления (платежи будут работать и без них).

---

## Итого: что прислать

```
# YooKassa
YUKASSA_SHOP_ID=
YUKASSA_SECRET_KEY=
YUKASSA_WEBHOOK_SECRET=

# Resend (опционально)
RESEND_API_KEY=
```

---

## FAQ

**Q: Где взять тестовый магазин?**
A: В личном кабинете YooKassa есть переключатель "Тестовый магазин" / "Боевой магазин"

**Q: Можно ли сначала протестировать?**
A: Да! Используйте тестовый магазин и тестовые карты:
- Успешный платёж: `4111 1111 1111 1111`
- Отклонённый: `4000 0000 0000 0002`

**Q: Сколько ждать одобрения?**
A: Обычно 1-3 рабочих дня. Иногда могут запросить дополнительные документы.

**Q: Что если сайт ещё не на symancy.ru?**
A: Можно указать временный URL (например, Netlify preview) и потом изменить.
